<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>duckling.time.pred documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Clj-duckling</span> <span class="project-version">0.4.25-dev</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>duckling</span></div></div></li><li class="depth-2 branch"><a href="duckling.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="duckling.corpus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>corpus</span></div></a></li><li class="depth-2 branch"><a href="duckling.dev.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev</span></div></a></li><li class="depth-2 branch"><a href="duckling.engine.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>engine</span></div></a></li><li class="depth-2 branch"><a href="duckling.helpers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="duckling.learn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>learn</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ml</span></div></div></li><li class="depth-3"><a href="duckling.ml.naivebayes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>naivebayes</span></div></a></li><li class="depth-2 branch"><a href="duckling.qa.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>qa</span></div></a></li><li class="depth-2 branch"><a href="duckling.resource.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resource</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></div></li><li class="depth-3 branch"><a href="duckling.time.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-3 branch"><a href="duckling.time.obj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>obj</span></div></a></li><li class="depth-3 branch current"><a href="duckling.time.pred.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pred</span></div></a></li><li class="depth-3"><a href="duckling.time.prod.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prod</span></div></a></li><li class="depth-2"><a href="duckling.util.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>util</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="duckling.time.pred.html#var-compose"><div class="inner"><span>compose</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-cycle"><div class="inner"><span>cycle</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-day-of-month"><div class="inner"><span>day-of-month</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-day-of-week"><div class="inner"><span>day-of-week</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-fn.26"><div class="inner"><span>fn&amp;</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-grain-after-shift"><div class="inner"><span>grain-after-shift</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-hour"><div class="inner"><span>hour</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-intervals"><div class="inner"><span>intervals</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-minute"><div class="inner"><span>minute</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-month"><div class="inner"><span>month</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-my-mapcat"><div class="inner"><span>my-mapcat</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-resolve"><div class="inner"><span>resolve</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-safe-max"><div class="inner"><span>safe-max</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-safe-max-interval"><div class="inner"><span>safe-max-interval</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-sec"><div class="inner"><span>sec</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-seq-map"><div class="inner"><span>seq-map</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-shift-duration"><div class="inner"><span>shift-duration</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-show"><div class="inner"><span>show</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-take-n"><div class="inner"><span>take-n</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-take-the-last-of"><div class="inner"><span>take-the-last-of</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-take-the-nth"><div class="inner"><span>take-the-nth</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-take-the-nth-after"><div class="inner"><span>take-the-nth-after</span></div></a></li><li class="depth-1"><a href="duckling.time.pred.html#var-year"><div class="inner"><span>year</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">duckling.time.pred</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-compose"><h3>compose</h3><div class="usage"><code>(compose pred)</code><code>(compose pred1' pred2')</code><code>(compose pred1 pred2 &amp; more)</code></div><div class="doc"><pre class="plaintext">Compose several predicates - can see this as intersection
</pre></div></div><div class="public anchor" id="var-cycle"><h3>cycle</h3><div class="usage"><code>(cycle grain)</code></div><div class="doc"><pre class="plaintext">A sequence of each year, or month, or week, etc.
Used for 'this year', 'next month', 'last week'..</pre></div></div><div class="public anchor" id="var-day-of-month"><h3>day-of-month</h3><div class="usage"><code>(day-of-month dom)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-day-of-week"><h3>day-of-week</h3><div class="usage"><code>(day-of-week dow)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-fn.26"><h3>fn&amp;</h3><h4 class="type">macro</h4><div class="usage"><code>(fn&amp; grain args &amp; forms)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-grain-after-shift"><h3>grain-after-shift</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-hour"><h3>hour</h3><div class="usage"><code>(hour h twelve-hour-clock?)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-intervals"><h3>intervals</h3><div class="usage"><code>(intervals pred-from pred-to inclusive-to?)</code></div><div class="doc"><pre class="plaintext">Builds a sequence of intervals, each starting at the start of pred-from
and ending at the start (inclusive-to? false) or end (inclusive-to? true)
of the first pred-from time that follows the start of pred-from.
Example: (intervals (day-of-week 1) (day-of-week 3) true)</pre></div></div><div class="public anchor" id="var-minute"><h3>minute</h3><div class="usage"><code>(minute m)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-month"><h3>month</h3><div class="usage"><code>(month mo)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-my-mapcat"><h3>my-mapcat</h3><div class="usage"><code>(my-mapcat f coll)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-resolve"><h3>resolve</h3><div class="usage"><code>(resolve {:keys [dim pred not-immediate timezone], :as token} {:keys [reference-time], :as context})</code></div><div class="doc"><pre class="plaintext">Turns a token into a list of actual possible time values.
Behavior depends on the ref-time in context, and token fields like
:not-immediate.</pre></div></div><div class="public anchor" id="var-safe-max"><h3>safe-max</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-safe-max-interval"><h3>safe-max-interval</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-sec"><h3>sec</h3><div class="usage"><code>(sec s)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-seq-map"><h3>seq-map</h3><div class="usage"><code>(seq-map f pred &amp; [dont-reverse?])</code></div><div class="doc"><pre class="plaintext">Applies f to each interval yielded by pred.
As f changes intervals, an interval that was ahead can become behind, and
reciprocally. We make the assumption that f doesn't change the order of
intervals though, or it would be much harder to maintain lazyness.</pre></div></div><div class="public anchor" id="var-shift-duration"><h3>shift-duration</h3><div class="usage"><code>(shift-duration base-pred duration)</code></div><div class="doc"><pre class="plaintext">Shifts base-pred forward or backward ('two days after pred')
Duration can be negative ('three hours before pred').
The resulting grain is the one just below the duration's grain
Shifted slots' width is exactly their grain</pre></div></div><div class="public anchor" id="var-show"><h3>show</h3><div class="usage"><code>(show f)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-take-n"><h3>take-n</h3><div class="usage"><code>(take-n pred n &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Takes n cycles of pred. Used for 'next 2 weeks' for instance.
Goes forward for positive n, backward otherwise.

Accepts a :not-immediate option like take-the-nth</pre></div></div><div class="public anchor" id="var-take-the-last-of"><h3>take-the-last-of</h3><div class="usage"><code>(take-the-last-of cyclic-pred base-pred)</code></div><div class="doc"><pre class="plaintext">Takes the *last* occurence of cyclic-pred *within* base-pred.
For example, cyclic-pred is 'Monday' and base-pred 'October'</pre></div></div><div class="public anchor" id="var-take-the-nth"><h3>take-the-nth</h3><div class="usage"><code>(take-the-nth pred n &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Builds a predicate with only the nth time slot of a presumably cyclical pred after ref-time,
backward (negative n) or forward (positive n).
Beware that 0 =&gt; first forward, but -1 =&gt; first backward

Options:

:not-immediate: if true, the first slot will be dropped if it
contains t. No effect on backward lookups (t is never containes in them).</pre></div></div><div class="public anchor" id="var-take-the-nth-after"><h3>take-the-nth-after</h3><div class="usage"><code>(take-the-nth-after cyclic-pred base-pred n &amp; [opts])</code></div><div class="doc"><pre class="plaintext">Like take-the-nth, but takes the nth cyclic-pred *after base-pred*
(or before if n is negative.
Since pred generates sequences, it also generates sequences.

Options: :not-immediate works as usual</pre></div></div><div class="public anchor" id="var-year"><h3>year</h3><div class="usage"><code>(year yyyy)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>